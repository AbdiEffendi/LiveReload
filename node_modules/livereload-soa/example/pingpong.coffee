soa = require '../index'

class PingPongService extends soa.ServiceImpl
  initialize: ->
    setInterval @_tick, 1000

  on_ping: (message, callback) ->
    callback(null, 42);

  _tick: =>
    this.send({ command: 'pong', service: 'whatever' })

module.exports = (carrier) ->
  return new PingPongService(carrier, { name: 'pingpong' })
