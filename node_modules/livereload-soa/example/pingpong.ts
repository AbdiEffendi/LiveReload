/// <reference path="../index.d.ts" />

import soa = require('livereload-soa');

class PingPongService extends soa.ServiceImpl {
    initialize() {
        setInterval(this.tick.bind(this), 1000);
    }

    on_ping(message, callback) {
        callback(null, 42);
    }

    tick() {
        this.send({ command: 'pong', service: 'whatever' });
    }
}

export function endpoint(carrier): soa.Service {
    return new PingPongService(carrier, { name: 'pingpong' });
}
