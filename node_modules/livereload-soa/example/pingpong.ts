import services = require('../lib/service');

class PingPongService extends services.ServiceImpl {
    initialize() {
        setInterval(this.tick.bind(this), 1000);
    }

    on_ping(message, callback) {
        callback(null, 42);
    }

    tick() {
        this.send({ command: 'pong', service: 'whatever' });
    }
}

export function endpoint(carrier): services.Service {
    return new PingPongService(carrier, { name: 'pingpong' });
}
