/// <reference path="./d.ts/DefinitelyTyped/node/node.d.ts" />

declare module "livereload-soa" {

import events = require('events');

// lib/api.d.ts
export interface Message {
    service?: string;
    command?: string;
    callback?: number;
    reply?: Message;
    error?: Error;
    result?: any;
}
export interface Carrier {
    send(message: Message): void;
}
export interface MasterCarrier extends Carrier {
    pipe(service: Service): Carrier;
}
export interface Service {
    onmessage(message: Message): void;
    ondisconnect(): void;
}

// lib/carrier-node-stream.d.ts
export class NodeStreamCarrier extends events.EventEmitter {
    private input;
    private output;
    private buffer;
    constructor(input, output);
    public _processLine(line): void;
    public send(message): void;
    public pipe(service): NodeStreamCarrier;
}

// lib/muxer.d.ts
export function createMuxer(carrier): Service;

}
